<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yuan.springbootwebmybatisplus.system.mapper.SysUserMapper">

    <select id="countByUsername" resultType="int">
        select count(*)
        from sys_user su
        where su.username = #{username,jdbcType=VARCHAR}
    </select>
    <select id="findPageByQueryParams" resultType="map">
        select *
        from sys_user su where 1=1
        <if test="param2.id != null and param2.id != ''">
            and id=#{param2.id,jdbcType=VARCHAR}
        </if>
        <if test="param2.ids != null and param2.ids.length != 0">
            and id in ( <foreach collection="param2.ids" separator="," item="id">#{id,jdbcType=VARCHAR}</foreach>)
        </if>
        <if test="param2.name != null and param2.name != ''">
            and (username like concat('%',#{param2.name,jdbcType=VARCHAR} ,'%') or name like
            concat('%',#{param2.name,jdbcType=VARCHAR} ,'%') or name_spell_simple like
            concat('%',#{param2.name,jdbcType=VARCHAR} ,'%') or name_spell_full like
            concat('%',#{param2.name,jdbcType=VARCHAR} ,'%'))
        </if>
        <if test="param2.createDate != null">
            and date(create_date) = date(#{param2.createDate} )
        </if>
        <if test="param2.updateDate!=null ">
            and date(update_date) = date(#{param2.updateDate} )
        </if>
        <if test="param2.createDateStart != null">
            and date(create_date) <![CDATA[>=]]> date(#{param2.createDateStart} )
        </if>
        <if test="param2.createDateEnd != null">
            and date(create_date) <![CDATA[<=]]> date(#{param2.createDateEnd} )
        </if>
        <if test="param2.updateDateStart!=null ">
            and date(update_date) <![CDATA[>=]]> date(#{param2.updateDateStart} )
        </if>
        <if test="param2.updateDateEnd">
            and date(update_date) <![CDATA[<=]]> date(#{param2.updateDateEnd} )
        </if>
    </select>
    <select id="findListByQueryParams" resultType="map">
        select *
        from sys_user su where 1=1
        <if test="param2.id != null and param2.id != ''">
            and id=#{param2.id,jdbcType=VARCHAR}
        </if>
        <if test="param2.ids != null and param2.ids.length != 0">
            and id in ( <foreach collection="param2.ids" separator="," item="id">#{id,jdbcType=VARCHAR}</foreach>)
        </if>
        <if test="param2.name != null and param2.name != ''">
            and (username like concat('%',#{param2.name,jdbcType=VARCHAR} ,'%') or name like
            concat('%',#{param2.name,jdbcType=VARCHAR} ,'%') or name_spell_simple like
            concat('%',#{param2.name,jdbcType=VARCHAR} ,'%') or name_spell_full like
            concat('%',#{param2.name,jdbcType=VARCHAR} ,'%'))
        </if>
        <if test="param2.createDate != null">
            and date(create_date) = date(#{param2.createDate} )
        </if>
        <if test="param2.updateDate!=null ">
            and date(update_date) = date(#{param2.updateDate} )
        </if>
        <if test="param2.createDateStart != null">
            and date(create_date) <![CDATA[>=]]> date(#{param2.createDateStart} )
        </if>
        <if test="param2.createDateEnd != null">
            and date(create_date) <![CDATA[<=]]> date(#{param2.createDateEnd} )
        </if>
        <if test="param2.updateDateStart!=null ">
            and date(update_date) <![CDATA[>=]]> date(#{param2.updateDateStart} )
        </if>
        <if test="param2.updateDateEnd">
            and date(update_date) <![CDATA[<=]]> date(#{param2.updateDateEnd} )
        </if>
    </select>
</mapper>
